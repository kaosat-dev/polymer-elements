  <polymer-element name="accel-compass-old" attributes="name value step min max">
    <template>
      <style>
		@host {
	  * {
		display: block;
		padding-bottom: 15px;
		
	  }
	}
        input[type='range'].mainSlider::-webkit-slider-thumb{
            -webkit-appearance: none !important;
            background:blue;
            height:10px;
            width:10px;
        }
        input[type='range'].mainSlider  {
            -webkit-appearance: none !important;
            background:orange;
            height:10px;
        }
        #backdrop {
        background: rgba(0, 0, 0, 0.25);
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        z-index: -1;
      }

      .notches
      {
        background:-webkit-linear-gradient(0deg, transparent 0px, transparent 10px, red 10px, red 11px, transparent 11px) 50% 50%  repeat-x;    
        /*  background-image: url('slider_bg.png') 50% 50% repeat-x;*/
      }
     
      #valueOver{
        position:absolute;
        text-align: center;
        width:170px;
		line-height:0.5em;
		font-size:0.8em;
      }
      </style>
      <div>
        <span>{{min}}</span>
        <input id="slider" class="mainSlider notches" type="range" min="{{ min }}" max="{{ max }}" value="{{value}}" step={{step}} />
        <span>{{max}}</span>
        <div id="valueOver">{{ value }}</div>
      </div>
     </template>
     <script>
      Polymer("accel-compass-old", {
        min: -100,
        max: 100,
        value: 0,
        step: 0.1,
	  ready:function(){
		if (window.DeviceOrientationEvent) {
  			// Listen for the event and handle DeviceOrientationEvent object
		  window.addEventListener('deviceorientation', devOrientHandler, false);
		}
	  },
      devOrientHandler:function()
	  {

		},		

      maxChanged:function(){this.value = Math.min(this.max,this.value);},
      minChanged:function(){this.value = Math.max(this.min,this.value);},
      valueChanged:function(){
        this.fire('value-changed', {name: this.name,value:this.value});
      }
      });
    </script>
  </polymer-element>


<polymer-element name="accel-compass" attributes="supported enabled roll pitch yaw" >
	<style>
		@host {
	  * {
		display: block;
		padding-bottom: 15px;
	  }
	}
	</style>
	<template>
		<input type="checkbox" checked="{{supported}}" disabled>Supported</input>
		<input type="checkbox" checked="{{enabled}}" >enabled</input>
		<input type="text" value={{roll}} disabled>Roll</input>
		<input type="text" value={{pitch}} disabled>Pitch</input>
		<input type="text" value={{yaw}} disabled>Yaw</input>
	</template>
	<script>
		Polymer("accel-compass", {
			supported: false,
			enabled: true,
			roll: 0,
			pitch:0,
			yaw:0,
			ready:function(){
				//var self = this;
				if (window.DeviceOrientationEvent) {
					this.supported = true;
					window.addEventListener('beforeunload', this.beforeUnload.bind(this));
	  				// Listen for the event and handle DeviceOrientationEvent object
			  		window.addEventListener('deviceorientation', this.devOrientHandler.bind(this));
				}
				/*
				if (window.DeviceMotionEvent) {
					this.supported = true;
	  				// Listen for the event and handle DeviceOrientationEvent object
			  		window.addEventListener('deviceorientation', this.devOrientHandler, false);
				}*/
		  	},
		  	devOrientHandler:function(eventData)
		  	{
				console.log("orientation changed",this);
				// gamma is the left-to-right tilt in degrees, where right is positive
				var tiltLR = eventData.gamma;//roll
				this.roll = tiltLR != null ?  tiltLR.toFixed(2) : 0 ;
				
				// beta is the front-to-back tilt in degrees, where front is positive
				var tiltFB = eventData.beta;//pitch
				this.pitch = tiltFB != null ?  tiltFB.toFixed(2) : 0 ;

				// alpha is the compass direction the device is facing in degrees
				var dir = eventData.alpha//yaw
				this.yaw = dir != null ?  dir.toFixed(2) : 0 ;

				console.log("tiltLR",tiltLR,"tiltFB",tiltFB,"dir",dir);
			},
			beforeUnload: function() {
				window.removeEventListener('deviceorientation', this.devOrientHandler)
				//this.ws.
        		//this.ws.onclose = function () {}; // disable onclose handler first
        		//this.ws.close();
				return true;
      		}
		  });
	</script>
</polymer-element>
